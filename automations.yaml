- id: '1603889259480'
  alias: Garage Button - Momentary Switch
  description: ''
  trigger:
  - platform: state
    to: 'on'
    entity_id: switch.garage_opener
  condition: []
  action:
  - delay: 00:00:01
  - service: switch.turn_off
    data: {}
    target:
      entity_id: switch.garage_opener
  mode: single
- id: '1616166477419'
  alias: EMERGENCY - Kitchen Refrigerator Water Detected
  description: ''
  trigger:
  - type: moist
    platform: device
    device_id: c9f4cccc6d48d24616b478f9cbcfff32
    entity_id: binary_sensor.kitchen_refrigerator_water_detected
    domain: binary_sensor
  condition: []
  action:
  - repeat:
      until:
      - type: is_not_moist
        condition: device
        device_id: c9f4cccc6d48d24616b478f9cbcfff32
        entity_id: binary_sensor.kitchen_refrigerator_water_detected
        domain: binary_sensor
      sequence:
      - service: notify.brady_holly_iphones
        data:
          message: There is a leak detected beneath the kitchen refrigerator! Tell
            the kids to get a towel, we're going swimming.
          title: Leak Detected!
          data:
            push:
              sound:
                name: default
                critical: 1
                volume: 1
      - delay:
          hours: 0
          minutes: 1
          seconds: 0
          milliseconds: 0
  mode: restart
- id: '1616167403008'
  alias: ISSUE - Kitchen refrigerator leak sensor battery low
  description: ''
  trigger:
  - platform: time
    at: '10:00:00'
  condition:
  - type: is_bat_low
    condition: device
    device_id: c9f4cccc6d48d24616b478f9cbcfff32
    entity_id: binary_sensor.homeseer_z_wave_plus_leak_sensor_low_battery_level
    domain: binary_sensor
  action:
  - service: notify.mobile_app_bradys_iphone
    data:
      title: Low Battery
      message: Kitchen
  mode: single
- id: '1623968300024'
  alias: Time - Sunset
  description: ''
  trigger:
  - platform: sun
    event: sunset
  condition: []
  action:
  - type: turn_on
    device_id: aabe5b719c16bf7fb28a1cefafa4f638
    entity_id: switch.outside_driveway_light
    domain: switch
  - type: turn_on
    device_id: 3ad2ff5c0625a224ba7cebc093b39d51
    entity_id: light.outside_front_porch
    domain: light
  mode: single
- id: '1623968412592'
  alias: Time - Sunrise (offset -30m)
  description: Turn off exterior lights at sunrise
  trigger:
  - platform: sun
    event: sunrise
    offset: -00:30:00
  condition: []
  action:
  - type: turn_off
    device_id: aabe5b719c16bf7fb28a1cefafa4f638
    entity_id: switch.outside_driveway_light
    domain: switch
  - type: turn_off
    device_id: 3ad2ff5c0625a224ba7cebc093b39d51
    entity_id: light.outside_front_porch
    domain: light
  mode: single
- id: '1623968513391'
  alias: Time - Kitchen - Coffee Reset
  description: Turn off coffee power at 6pm
  trigger:
  - platform: time
    at: '18:00:00'
  condition: []
  action:
  - type: turn_off
    device_id: 90770ccd18c111eba96cc192cb4bd3c6
    entity_id: switch.kitchen_coffee
    domain: switch
  mode: single
- id: '1623981445593'
  alias: Time - Master Bedroom - Wakeup Call
  description: ''
  trigger:
  - platform: time
    at: input_datetime.master_bedroom_wakeup_time
  condition:
  - condition: time
    weekday:
    - mon
    - tue
    - wed
    - thu
    - fri
  action:
  - condition: state
    entity_id: binary_sensor.people_home
    state: 'on'
  - choose:
    - conditions:
      - condition: state
        entity_id: input_boolean.master_bedroom_sleep_in
        state: 'on'
      sequence:
      - service: homeassistant.turn_off
        target:
          entity_id: input_boolean.master_bedroom_sleep_in
    default:
    - service: switch.turn_off
      target:
        device_id: 544f9268e3d7d9021d3f36dd7606011e
    - service: input_datetime.set_datetime
      target:
        entity_id: input_datetime.master_bedroom_wakeup_time
      data:
        time: 07:00:00
  mode: single
- id: '1623983039999'
  alias: Time - 8:00 AM - Reminder Emerson Guest Mode On
  description: ''
  trigger:
  - platform: time
    at: 08:00:00
  condition:
  - condition: state
    entity_id: input_boolean.emerson_bedroom_guest
    state: 'on'
  action:
  - service: notify.mobile_app_bradys_iphone
    data:
      message: Emerson bedroom guest mode is enabled.
      title: Home Reminder
  mode: single
- id: '1623983129803'
  alias: Time - 8:00 AM - Reminder Guest Mode Enabled
  description: ''
  trigger:
  - platform: time
    at: 08:00:00
  condition:
  - condition: state
    entity_id: input_boolean.presence_guest
    state: 'on'
  action:
  - service: notify.mobile_app_bradys_iphone
    data:
      message: Guest mode is enabled.
      title: Home Reminder
  mode: single
- id: '1623983823883'
  alias: Brady Office - Cube - Rotate Right
  description: ''
  trigger:
  - platform: device
    domain: mqtt
    device_id: 9077998b18c111eb960a27cecc7c5cec
    type: action
    subtype: rotate_right
    discovery_id: 0x00158d00032c9e2d action_rotate_right
  condition: []
  action:
  - choose:
    - conditions:
      - condition: state
        entity_id: sun.sun
        state: above_horizon
      sequence:
      - service: light.turn_on
        data:
          transition: 3
          brightness: 255
          kelvin: 4800
        target:
          entity_id: light.brady_office_desk
    default:
    - service: light.turn_on
      target:
        device_id: e88a9f9f8edbf590d9a531a3b8810d01
      data:
        transition: 10
        kelvin: 2600
        brightness_pct: 100
  mode: single
- id: '1623984001069'
  alias: Brady Office - Cube - Rotate Left
  description: ''
  trigger:
  - platform: device
    domain: mqtt
    device_id: 9077998b18c111eb960a27cecc7c5cec
    type: action
    subtype: rotate_left
    discovery_id: 0x00158d00032c9e2d action_rotate_left
  condition: []
  action:
  - service: light.turn_off
    data:
      transition: 5
    target:
      entity_id: light.brady_office_desk
  - service: light.turn_off
    target:
      entity_id: light.brady_office_couch
    data:
      transition: 5
  mode: single
- id: '1624013090864'
  alias: Downstairs Bathroom - Motion
  description: Turn on bathroom light for 30 minutes on motion
  trigger:
  - type: motion
    platform: device
    device_id: 907837c418c111ebbb6d91773cfacc14
    entity_id: binary_sensor.guest_bathroom_motion
    domain: binary_sensor
  condition: []
  action:
  - service: switch.turn_on
    target:
      device_id: b4c7eeefbfbbc9ed647d86634c56811a
  - delay:
      hours: 0
      minutes: 30
      seconds: 0
      milliseconds: 0
  - service: switch.turn_off
    target:
      device_id: b4c7eeefbfbbc9ed647d86634c56811a
  mode: restart
- id: '1624013786747'
  alias: Foyer - Motion - Turn on Island Light
  description: ''
  trigger:
  - type: motion
    platform: device
    device_id: f6839462c8fc3aacf38eba487d1f62c1
    entity_id: binary_sensor.foyer_motion
    domain: binary_sensor
  condition:
  - condition: template
    value_template: 'value_template: "{{ state_attr(''sun.sun'', ''elevation'') <
      -6 }}"'
  - condition: device
    type: is_off
    device_id: b5844f5a506359457bd6f5f9b92da167
    entity_id: light.kitchen_island_lights
    domain: light
    for:
      hours: 0
      minutes: 2
      seconds: 0
      milliseconds: 0
  action:
  - type: turn_on
    device_id: b5844f5a506359457bd6f5f9b92da167
    entity_id: light.kitchen_island_lights
    domain: light
    brightness_pct: 40
  mode: single
- id: '1624013955762'
  alias: Kitchen - Entry Door - Turn on Entry Light
  description: ''
  trigger:
  - platform: state
    entity_id: binary_sensor.kitchen_garage_entry_door
    to: 'on'
  condition:
  - condition: device
    type: is_off
    device_id: 12c92d982386e012a24b1ef0cb73cc21
    entity_id: switch.kitchen_closet_light
    domain: switch
  action:
  - type: turn_on
    device_id: 12c92d982386e012a24b1ef0cb73cc21
    entity_id: switch.kitchen_closet_light
    domain: switch
  mode: single
- id: '1624014307772'
  alias: Garage - Doors (entry or cover) Opened
  description: ''
  trigger:
  - type: turned_on
    platform: device
    device_id: 8cc1025c5227abaa702db562a9363506
    entity_id: binary_sensor.garage_cover
    domain: binary_sensor
  - platform: state
    entity_id: binary_sensor.kitchen_garage_entry_door
    to: 'on'
  condition:
  - condition: template
    value_template: 'value_template: "{{ state_attr(''sun.sun'', ''elevation'') <
      -6 }}"'
  - condition: device
    type: is_off
    device_id: 06db30d13e58f7ad02951a3e0a4ce55a
    entity_id: switch.garage_ceiling_light
    domain: switch
  action:
  - type: turn_on
    device_id: 06db30d13e58f7ad02951a3e0a4ce55a
    entity_id: switch.garage_ceiling_light
    domain: switch
  mode: single
- id: '1624014478469'
  alias: Garage - Doors (entry and cover) Closed
  description: ''
  trigger:
  - type: turned_off
    platform: device
    device_id: 8cc1025c5227abaa702db562a9363506
    entity_id: binary_sensor.garage_cover
    domain: binary_sensor
    for:
      hours: 0
      minutes: 15
      seconds: 0
      milliseconds: 0
  - platform: state
    entity_id: binary_sensor.kitchen_garage_entry_door
    to: 'off'
    for: 00:15:00
  condition:
  - condition: device
    type: is_on
    device_id: 06db30d13e58f7ad02951a3e0a4ce55a
    entity_id: switch.garage_ceiling_light
    domain: switch
  action:
  - type: turn_off
    device_id: 06db30d13e58f7ad02951a3e0a4ce55a
    entity_id: switch.garage_ceiling_light
    domain: switch
  mode: restart
- id: '1624014899053'
  alias: Garage Open while sun is down
  description: ''
  trigger:
  - type: turned_on
    platform: device
    device_id: 8cc1025c5227abaa702db562a9363506
    entity_id: binary_sensor.garage_cover
    domain: binary_sensor
  - platform: sun
    event: sunset
  condition:
  - type: is_on
    condition: device
    device_id: 8cc1025c5227abaa702db562a9363506
    entity_id: binary_sensor.garage_cover
    domain: binary_sensor
  - condition: state
    entity_id: sun.sun
    state: below_horizon
  action:
  - repeat:
      until:
      - type: is_off
        condition: device
        device_id: 8cc1025c5227abaa702db562a9363506
        entity_id: binary_sensor.garage_cover
        domain: binary_sensor
      sequence:
      - service: notify.mobile_app_bradys_iphone
        data:
          message: Garage is open and it is night.
          title: Garage Alert
      - delay:
          hours: 0
          minutes: 15
          seconds: 0
          milliseconds: 0
  mode: restart
- id: '1624018110355'
  alias: Hadley Bedroom - Door Opened
  description: ''
  trigger:
  - type: turned_on
    platform: device
    device_id: d6d7286c723a9d242b1ec4f8ab481bb2
    entity_id: binary_sensor.hadley_bedroom_door
    domain: binary_sensor
  condition: []
  action:
  - service: light.turn_on
    target:
      entity_id: light.hadley_bedroom_nightstand
    data:
      transition: 3
      kelvin: 3000
      brightness: 75
  mode: restart
- id: '1624018352517'
  alias: Hadley Bedroom - Door open for 30 minutes
  description: ''
  trigger:
  - type: turned_on
    platform: device
    device_id: d6d7286c723a9d242b1ec4f8ab481bb2
    entity_id: binary_sensor.hadley_bedroom_door
    domain: binary_sensor
    for:
      hours: 0
      minutes: 30
      seconds: 0
      milliseconds: 0
  condition: []
  action:
  - service: homeassistant.turn_off
    target:
      entity_id:
      - light.hadley_bedroom_ceiling
      - light.hadley_bedroom_nightstand
      - switch.hadley_bedroom_floor_fan
  mode: single
- id: '1624018514582'
  alias: Hadley Bedroom - Door Closed
  description: ''
  trigger:
  - type: turned_off
    platform: device
    device_id: d6d7286c723a9d242b1ec4f8ab481bb2
    entity_id: binary_sensor.hadley_bedroom_door
    domain: binary_sensor
  condition: []
  action:
  - type: turn_on
    device_id: 303b098c0487260b5a73d750133ef0d6
    entity_id: switch.hadley_bedroom_floor_fan
    domain: switch
  - type: turn_off
    device_id: 82ed6e62b039560ebb572e5485f8b2ba
    entity_id: switch.hadley_bedroom_ceiling_light
    domain: switch
  - service: light.turn_off
    target:
      entity_id: light.hadley_bedroom_nightstand
    data:
      transition: 3
  mode: single
- id: '1624031232442'
  alias: Emerson Bedroom - Door Opened
  description: ''
  trigger:
  - type: turned_on
    platform: device
    device_id: 93d35e4bf84c905804212faf5d5aba71
    entity_id: binary_sensor.emerson_bedroom_door
    domain: binary_sensor
  condition:
  - condition: state
    entity_id: input_boolean.emerson_bedroom_guest
    state: 'off'
  action:
  - service: light.turn_on
    data:
      transition: 3
      kelvin: 3000
      brightness: 75
    target:
      entity_id: light.emerson_bedroom_nightstand
  mode: restart
- id: '1624031371290'
  alias: Emerson Bedroom - Door Closed
  description: ''
  trigger:
  - type: turned_off
    platform: device
    device_id: 93d35e4bf84c905804212faf5d5aba71
    entity_id: binary_sensor.emerson_bedroom_door
    domain: binary_sensor
  condition:
  - condition: state
    entity_id: input_boolean.emerson_bedroom_guest
    state: 'off'
  action:
  - type: turn_off
    device_id: 82ed6e62b039560ebb572e5485f8b2ba
    entity_id: switch.hadley_bedroom_ceiling_light
    domain: switch
  - service: light.turn_off
    data:
      transition: 3
    target:
      entity_id:
      - light.emerson_bedroom_ceiling
      - light.emerson_bedroom_nightstand
  - delay:
      hours: 0
      minutes: 0
      seconds: 3
      milliseconds: 0
  - service: light.turn_off
    target:
      entity_id: light.emerson_bedroom_dresser
    data:
      transition: 5
  mode: restart
- id: '1624031519195'
  alias: Emerson Bedroom - Door open for 30 minutes
  description: ''
  trigger:
  - type: turned_on
    platform: device
    device_id: 93d35e4bf84c905804212faf5d5aba71
    entity_id: binary_sensor.emerson_bedroom_door
    domain: binary_sensor
    for:
      hours: 0
      minutes: 30
      seconds: 0
      milliseconds: 0
  condition:
  - condition: state
    entity_id: input_boolean.emerson_bedroom_guest
    state: 'off'
  action:
  - service: homeassistant.turn_off
    target:
      entity_id:
      - light.emerson_bedroom_nightstand
      - switch.emerson_bedroom_floor_fan
      - light.emerson_bedroom_dresser
  mode: single
- id: '1624031897146'
  alias: Emerson Bedroom - Switch Favorite Button
  description: ''
  trigger:
  - platform: event
    event_type: zwave_js_value_notification
    event_data:
      node_id: 47
      property_key: '003'
      value: KeyPressed
  condition: []
  action:
  - service: light.turn_on
    target:
      entity_id: light.emerson_bedroom_nightstand
    data:
      transition: 5
      color_name: pink
      brightness: 150
  - service: light.turn_on
    data:
      transition: 5
      color_name: purple
      brightness: 150
    target:
      entity_id: light.emerson_bedroom_dresser
  - type: turn_off
    device_id: ee745e5d848409d554aa344b0fcd9039
    entity_id: switch.emerson_bedroom_ceiling_light
    domain: switch
  mode: single
- id: '1624032810797'
  alias: Emerson Bedroom - Switch Hold Up or double tapped
  description: ''
  trigger:
  - platform: event
    event_type: zwave_js_value_notification
    event_data:
      node_id: 47
      property_key: '002'
      value: KeyHeldDown
  - platform: event
    event_type: zwave_js_value_notification
    event_data:
      node_id: 47
      property_key: '002'
      value: KeyPressed2x
  condition: []
  action:
  - service: light.turn_on
    target:
      entity_id:
      - light.emerson_bedroom_nightstand
      - light.emerson_bedroom_dresser
    data:
      transition: 3
      brightness: 255
      kelvin: 2700
  - delay:
      hours: 0
      minutes: 0
      seconds: 3
      milliseconds: 0
  - type: turn_on
    device_id: ee745e5d848409d554aa344b0fcd9039
    entity_id: switch.emerson_bedroom_ceiling_light
    domain: switch
  mode: single
- id: '1624032894278'
  alias: Emerson Bedroom - Switch Hold or Double Tap Down
  description: ''
  trigger:
  - platform: event
    event_type: zwave_js_value_notification
    event_data:
      node_id: 47
      property_key: '001'
      value: KeyHeldDown
  - platform: event
    event_type: zwave_js_value_notification
    event_data:
      node_id: 47
      property_key: '001'
      value: KeyPressed2x
  condition: []
  action:
  - service: light.turn_off
    data:
      transition: 3
    target:
      entity_id:
      - light.emerson_bedroom_nightstand
      - light.emerson_bedroom_dresser
  - type: turn_off
    device_id: ee745e5d848409d554aa344b0fcd9039
    entity_id: switch.emerson_bedroom_ceiling_light
    domain: switch
  mode: single
- id: '1624035249756'
  alias: Master Bathroom - Humidity High
  description: ''
  trigger:
  - type: humidity
    platform: device
    device_id: 907da82518c111ebb689e766efdccabf
    entity_id: sensor.master_bathroom_shower_humidity
    domain: sensor
    above: 80
  condition:
  - condition: device
    type: is_off
    device_id: e93d1dc1691e5dfde0e2c21363417c7e
    entity_id: switch.master_bathroom_shower_fan
    domain: switch
  action:
  - type: turn_on
    device_id: e93d1dc1691e5dfde0e2c21363417c7e
    entity_id: switch.master_bathroom_shower_fan
    domain: switch
  mode: single
- id: '1624035334920'
  alias: Master Bathroom - Humidity dropped
  description: ''
  trigger:
  - type: humidity
    platform: device
    device_id: 907da82518c111ebb689e766efdccabf
    entity_id: sensor.master_bathroom_shower_humidity
    domain: sensor
    below: 70
  condition:
  - condition: device
    type: is_on
    device_id: e93d1dc1691e5dfde0e2c21363417c7e
    entity_id: switch.master_bathroom_shower_fan
    domain: switch
  action:
  - type: turn_off
    device_id: e93d1dc1691e5dfde0e2c21363417c7e
    entity_id: switch.master_bathroom_shower_fan
    domain: switch
  mode: single
- id: '1624041682364'
  alias: Presence - Guest Mode Changed Notification
  description: ''
  trigger:
  - platform: state
    entity_id: input_boolean.presence_guest
  condition: []
  action:
  - service: notify.mobile_app_bradys_iphone
    data:
      title: Guest Mode
      message: Guest mode is {% if is_state("input_boolean.presence_guest", "on")
        -%}enabled{%- else -%}disabled{% endif %}.
  mode: single
- id: '1624048054955'
  alias: Presence - House became empty
  description: ''
  trigger:
  - platform: state
    entity_id: binary_sensor.people_home
    to: 'off'
  condition: []
  action:
  - service: notify.mobile_app_bradys_iphone
    data:
      message: Empty house deteced. The house will be set away in 2 minutes
      title: Home Status
  - delay:
      hours: 0
      minutes: 2
      seconds: 0
      milliseconds: 0
  - condition: state
    entity_id: binary_sensor.people_home
    state: 'off'
  - service: climate.set_preset_mode
    target:
      entity_id: climate.living_room
    data:
      preset_mode: away
  - service: light.turn_off
    target:
      entity_id: all
  - service: switch.turn_off
    target:
      entity_id:
      - switch.emerson_bedroom_floor_fan
      - switch.hadley_bedroom_floor_fan
  - service: media_player.media_stop
    target:
      entity_id: all
  - service: media_player.turn_off
    target:
      entity_id: all
  - service: fan.turn_off
    target:
      entity_id: all
  - choose:
    - conditions:
      - condition: state
        entity_id: sun.sun
        state: below_horizon
      sequence:
      - service: light.turn_on
        target:
          entity_id:
          - light.outside_driveway
          - light.outside_front_porch
    default: []
  - choose:
    - conditions:
      - condition: state
        entity_id: cover.garage
        state: open
      sequence:
      - service: notify.mobile_app_bradys_iphone
        data:
          message: House became empty and the garage is open!
          title: Home Status ALERT
    default: []
  - service: switch.turn_on
    target:
      entity_id:
      - switch.actions_hadley_camera
      - switch.actions_emerson_camera
      - switch.record_motion_hadley_camera
      - switch.record_motion_emerson_camera
  mode: restart
- id: '1624048856751'
  alias: Presence - Home became occupied
  description: ''
  trigger:
  - platform: state
    entity_id: binary_sensor.people_home
    to: 'on'
  condition: []
  action:
  - service: climate.set_preset_mode
    target:
      entity_id: climate.living_room
    data:
      preset_mode: home
  - service: switch.turn_off
    target:
      entity_id:
      - switch.actions_emerson_camera
      - switch.record_motion_emerson_camera
      - switch.actions_hadley_camera
      - switch.record_motion_hadley_camera
  mode: single
- id: '1624049395493'
  alias: Family Room - New scene selected in lovelace
  description: ''
  trigger:
  - platform: state
    entity_id: input_select.family_room_scene
  condition: []
  action:
  - choose:
    - conditions:
      - condition: state
        entity_id: input_select.family_room_scene
        state: Max Brightness
      sequence:
      - service: scene.turn_on
        target:
          entity_id: scene.family_room_max_brightness
        data:
          transition: 5
    - conditions:
      - condition: state
        entity_id: input_select.family_room_scene
        state: Good Morning
      sequence:
      - service: scene.turn_on
        target:
          entity_id: scene.family_room_morning
        data:
          transition: 5
    - conditions:
      - condition: state
        entity_id: input_select.family_room_scene
        state: Watch Movie
      sequence:
      - service: script.scene_familyroom_watchmovie
    - conditions:
      - condition: state
        entity_id: input_select.family_room_scene
        state: Watch TV
      sequence:
      - service: scene.turn_on
        target:
          entity_id: scene.family_room_tv
        data:
          transition: 5
    default: []
  - service: input_select.select_first
    target:
      entity_id: input_select.family_room_scene
  mode: single
